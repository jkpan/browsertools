<script type="text/javascript" src="led.js" charset="UTF-8"></script>
<script type="text/javascript" src="marquee_anim.js" charset="UTF-8"></script>
<script type="text/javascript" src="ledmarquee.js" charset="UTF-8"></script>
<script type="text/javascript" src="clock.js" charset="UTF-8"></script>
<!DOCTYPE html>
<html>
    <head>
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" charset="UTF-8"/>
      <!--meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8"-->
      <style>
        body {
          margin: 0px;
          height: 100%;
          background-color:rgb(0, 0, 0);
          /*cursor:none;*/
        }
    </style>
    </head>
<body>
  
    <canvas id="canvas" width="100" height="100"></canvas>
  
</body>
  
</html>

<script type="text/javascript" src="common.js" charset="UTF-8"></script>
<script type="text/javascript" charset="UTF-8">

function _initData() {

    let _all = Math.max(7, Math.floor(window.innerHeight/50));
    dots = Math.ceil(_all * 0.7);
    side = Math.max(1, _all - dots);

    //side = 3;
    //dots = 4;
    
    makeRound = readParam('round') == 1?true:false;

    swing = readParam('mtype1') === '1'?1:0;
    swing1 = readParam('mtype2') === '1'?1:0;

    speed = 300;
    color_0 = readParam('color1') != null?readParam('color1'):"rgb(255, 255, 50)";
        
    speed1 = 150;
    color_1 = readParam('color2') != null?readParam('color2'):"rgb(255, 50, 50)";

    animIdx = readParam('anim') != null?parseInt(readParam('anim')):7;//parseInt(sel_anim.options[sel_anim.options.selectedIndex].value, 10);
    bgIdx = 0;

    subtitle[1] = readParam('str1') != null?[readParam('str1')]:[''];//["å¾æ­²é¦–åˆ°å¹´çµ‚ è€¶å’Œè¯ ä½ ç¥çš„çœ¼ç›®æ™‚å¸¸çœ‹é¡§é‚£åœ°"];//[ç”³11:12]
    //let cons = "ğŸ‰æ–°å¹´å¿«æ¨‚ğŸ‰";
    subtitle[2] = readParam('str2') != null?[readParam('str2')]:[''];  
        
    init();
    initAnim();
 
    window.scroll(0, 0);

    //led.html?color1=rgb(255,80,80)&color2=rgb(80,255,80)&mtype1=1&mtype2=0&str1=2024æ–°å¹´å¿«æ¨‚&str2=å¾æ­²é¦–åˆ°å¹´çµ‚ è€¶å’Œè¯ ä½ ç¥çš„çœ¼ç›®æ™‚å¸¸çœ‹é¡§é‚£åœ°&anim=7
}

_initData();

window.addEventListener('resize', function() {//init();//initAnim();
    _initData();
});

function getTouchPos(canvasDom, touchEvent) {
    var rect = canvasDom.getBoundingClientRect();
    return {x: touchEvent.touches[0].clientX - rect.left,
            y: touchEvent.touches[0].clientY - rect.top};
}

const controlRatio = 0.2;

function touchAction(_x, _y) {
    if (_x < canvas.width * controlRatio && _y > canvas.height * (1 - controlRatio)) { //å·¦ä¸‹
        canvas.requestFullscreen();
        return;
    }
    if (_x > canvas.width * (1 - controlRatio) && _y < canvas.height * controlRatio) { //å³ä¸Š
        keepLEDGoing = keepLEDGoing == 0?1:0;
    }
}

canvas.addEventListener("touchend" /*"touchstart"*/, function(evt) {

    //evt.preventDefault();
    var touches = getTouchPos(canvas, evt);
    
    touchAction(touches.x, touches.y);

});

canvas.addEventListener('mousedown', (e) =>{
  
  touchAction(e.x, e.y);

});

</script>


