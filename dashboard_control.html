<!DOCTYPE html>
<html>

<head>
    <meta name="viewport"
        content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height"
        charset="UTF-8" />
    <style>
        body {
            margin: 0px;
            height: 100%;
            width: 100%;
            background-color: rgb(0, 128, 0);
        }

        ::-webkit-scrollbar {
            display: none;
        }

        button {
            font-size: 16px;
            background-color: rgb(0, 150, 0);
            color: #00ff00;
            /*margin: 2% 2%;*/
            width: 18%;
            border: 1px solid;
            vertical-align: middle;
        }
    </style>
</head>

<body>
    <div id="controlWin" class="controlPart">
        <button onclick="reca()">recover</button>
        <button onclick="hida()">hide</button>
        <button onclick="shwa()">show</button>
        <button onclick="reloadState()">reload</button>
        <hr size="4" width="100%" color="#007000">
        <button onclick="controlParent('hymn')">ğŸ¤</button>
        <button onclick="controlParent('Bible')">ğŸšï¸</button>
        <button onclick="controlParent('NIV')">NIV</button>
        <button onclick="controlParent('url_1')">ğŸŒ1</button>
        <button onclick="controlParent('url_2')">ğŸŒ2</button>
        <button onclick="controlParent('file_1')">ğŸ“‚1</button>
        <button onclick="controlParent('file_2')">ğŸ“‚2</button>
        <button onclick="controlParent('info')">Info</button>
        <button onclick="controlParent('effect')">Effect</button>
        <button onclick="controlParent('time')">ğŸ•—</button>
        <button onclick="controlParent('dBoard')">å®¢åˆ¶</button>
        <button onclick="controlParent('tabs')">é ç±¤</button>

        <hr size="4" width="100%" color="#007000">
        <button id="hymn" onclick="controlParent('hymn')">ğŸ¤</button>
        <button id="hymn_v" onclick="switchVisible('hymn')">V</button>
        <button id="hymn_p" onclick="perspective('hymn')">P</button>
        <button id="hymn_x" onclick="closeApp('hymn')">x</button>
        <button id="hymn_l" onclick="lockApp('hymn')">ğŸ”“</button>

        <br>

        <button id="Bible" onclick="controlParent('Bible')">ğŸšï¸</button>
        <button id="Bible_v" onclick="switchVisible('Bible')">V</button>
        <button id="Bible_p" onclick="perspective('Bible')">P</button>
        <button id="Bible_x" onclick="closeApp('Bible')">x</button>
        <button id="Bible_l" onclick="lockApp('Bible')">ğŸ”“</button>

        <br>

        <button id="NIV" onclick="controlParent('NIV')">NIV</button>
        <button id="NIV_v" onclick="switchVisible('NIV')">V</button>
        <button id="NIV_p" onclick="perspective('NIV')">P</button>
        <button id="NIV_x" onclick="closeApp('NIV')">x</button>
        <button id="NIV_l" onclick="lockApp('NIV')">ğŸ”“</button>

        <br>

        <button id="url_1" onclick="controlParent('url_1')">ğŸŒ1</button>
        <button id="url_1_v" onclick="switchVisible('url_1')">V</button>
        <button id="url_1_p" onclick="perspective('url_1')">P</button>
        <button id="url_1_x" onclick="closeApp('url_1')">x</button>
        <button id="url_1_l" onclick="lockApp('url_1')">ğŸ”“</button>

        <br>

        <button id="url_2" onclick="controlParent('url_2')">ğŸŒ2</button>
        <button id="url_2_v" onclick="switchVisible('url_2')">V</button>
        <button id="url_2_p" onclick="perspective('url_2')">P</button>
        <button id="url_2_x" onclick="closeApp('url_2')">x</button>
        <button id="url_2_l" onclick="lockApp('url_2')">ğŸ”“</button>

        <br>

        <button id="file_1" onclick="controlParent('file_1')">ğŸ“‚1</button>
        <button id="file_1_v" onclick="switchVisible('file_1')">V</button>
        <button id="file_1_p" onclick="perspective('file_1')">P</button>
        <button id="file_1_x" onclick="closeApp('file_1')">x</button>
        <button id="file_1_l" onclick="lockApp('file_1')">ğŸ”“</button>

        <br>

        <button id="file_2" onclick="controlParent('file_2')">ğŸ“‚2</button>
        <button id="file_2_v" onclick="switchVisible('file_2')">V</button>
        <button id="file_2_p" onclick="perspective('file_2')">P</button>
        <button id="file_2_x" onclick="closeApp('file_2')">x</button>
        <button id="file_2_l" onclick="lockApp('file_2')">ğŸ”“</button>

        <br>

        <button id="info" onclick="controlParent('info')">Info</button>
        <button id="info_v" onclick="switchVisible('info')">V</button>
        <button id="info_p" onclick="perspective('info')">P</button>
        <button id="info_x" onclick="closeApp('info')">x</button>
        <button id="info_l" onclick="lockApp('info')">ğŸ”“</button>

        <br>

        <button id="effect" onclick="controlParent('effect')">Effect</button>
        <button id="effect_v" onclick="switchVisible('effect')">V</button>
        <button id="effect_p" onclick="perspective('effect')">P</button>
        <button id="effect_x" onclick="closeApp('effect')">x</button>
        <button id="effect_l" onclick="lockApp('effect')">ğŸ”“</button>

        <br>

        <button id="time" onclick="controlParent('time')">ğŸ•—</button>
        <button id="time_v" onclick="switchVisible('time')">V</button>
        <button id="time_p" onclick="perspective('time')">P</button>
        <button id="time_x" onclick="closeApp('time')">x</button>
        <button id="time_l" onclick="lockApp('time')">ğŸ”“</button>

        <br>

        <hr size="4" width="100%" color="#007000">
        <button id="dBoard" onclick="controlParent('dBoard')">å®¢åˆ¶</button>
        <button id="dBoard_v" onclick="switchVisible('dBoard')">V</button>
        <button id="dBoard_p" onclick="perspective('dBoard')">P</button>
        <button id="dBoard_x" onclick="closeApp('dBoard')">x</button>
        <button id="dBoard_l" onclick="lockApp('dBoard')">ğŸ”“</button>

        <br>

        <button id="tabs" onclick="controlParent('tabs')">é ç±¤</button>
        <button id="tabs_v" onclick="switchVisible('tabs')">V</button>
        <button id="tabs_p" onclick="perspective('tabs')">P</button>
        <button id="tabs_x" onclick="closeApp('tabs')">x</button>
        <button id="tabs_l" onclick="lockApp('tabs')">ğŸ”“</button>

    </div>

</body>

</html>

<script type="text/javascript" charset="UTF-8">

    function reca() {
        window.opener.recoverAll();
        reloadState();
    }
    function hida() {
        //window.opener.recoverAll();
        window.opener.hideAll();
        reloadState();
    }
    function shwa() {
        //window.opener.recoverAll();
        window.opener.showAll();
        reloadState();
    }

    function closeApp(keyname) {
        window.opener.closeApp(keyname);
        reloadState();
    }

    function lockApp(keyname) {
        window.opener.lockApp(keyname);
        reloadState();
    }

    function reloadState() {
        let stateArray = window.opener.getElmState();
        console.log(stateArray);
        for (let key in stateArray) {
            console.log(key);
            let b = document.getElementById(key);
            let b_v = document.getElementById(key + '_v');
            let b_p = document.getElementById(key + '_p');
            let b_x = document.getElementById(key + '_x');
            let b_l = document.getElementById(key + '_l');
            b.hidden = false;
            b_v.hidden = false;
            b_p.hidden = false;
            b_x.hidden = false;
            b_l.hidden = false;
            switch (stateArray[key]) {
                case -1:
                    b.style.backgroundColor = "transparent";
                    b_v.style.backgroundColor = "transparent";
                    b.hidden = true;
                    b_v.hidden = true;
                    b_p.hidden = true;
                    b_x.hidden = true;
                    b_l.hidden = true;
                    break;
                default:
                    if (stateArray[key] % 10 == 0) {
                        b.style.backgroundColor = "rgb(0,0,0)";
                        b_v.style.backgroundColor = "transparent";
                    } else {
                        b.style.backgroundColor = "rgb(0,0,0)";
                        b_v.style.backgroundColor = "rgb(0,0,0)";
                    }
                    if (Math.floor(stateArray[key] / 10) == 0) {
                        b_l.style.backgroundColor = "transparent";
                        b_l.textContent = 'ğŸ”“';
                    } else {
                        b_l.style.backgroundColor = "rgb(255,0,0)";
                        b_l.textContent = 'ğŸ”’';
                    }
                    break;
                /*
                case 0:
                    b.style.backgroundColor = "rgb(0,0,0)";
                    b_v.style.backgroundColor = "transparent";
                    break;
                case 1:
                    b.style.backgroundColor = "rgb(0,0,0)";
                    b_v.style.backgroundColor = "rgb(0,0,0)";
                    break;
                    */
            }
        }
    }

    function controlParent(keyname) {
        window.opener.spot2iframe(keyname);
        reloadState();
    }

    function switchVisible(keyname) {
        window.opener.switchVisible4iframe(keyname);
        reloadState();
    }

    function perspective(keyname) {
        window.opener.perspective4iframe(keyname);
        reloadState();
    }


    reloadState();

</script>