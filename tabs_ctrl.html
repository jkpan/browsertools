<!DOCTYPE html>
<html>
    <head>
      <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height" charset="UTF-8"/>
      <link rel="stylesheet" href="ui_green.css" />
      <title>Tabs-Ctrl</title>
    </head>
    <body>
                  
        <div id="controlWin" class="controlPart">
            <button style="width:48px;" id="f1" onclick="controlParent(1)">1</button>
            <button style="width:48px;" id="f2" onclick="controlParent(2)">2</button>
            <button style="width:48px;" id="f3" onclick="controlParent(3)">3</button>
            <button style="width:48px;" id="f4" onclick="controlParent(4)">4</button>
            <button style="width:48px;" id="f5" onclick="controlParent(5)">5</button>
            <button style="width:48px;" id="f6" onclick="controlParent(6)">6</button>
            <button style="width:48px;" id="f7" onclick="controlParent(7)">7</button>
            <button style="width:48px;" onclick="reload()">reload</button>
            <button style="width:48px;" onclick="closeWin()">close</button>
        </div>
      
    </body>
</html>

<script type="text/javascript" charset="UTF-8">

var elm;

function controlParent(idx) {
    elm = window.opener.switchFunction(idx);
    reload();
    //document.getElementById(keyname).blur();
    //window.blur();
    //elm.focus();
    //setTimeout(doFocus, 500);
}

function closeWin() {
  window.close();
}

function reload() {
  let active = window.opener.tab;
  console.log('tab:' + active+'/'+window.opener.tabCount);
  for(let i=1;i<=window.opener.tabCount;i++) {
    let b = document.getElementById('f'+i);
    if (i == active) 
      b.style.background = "rgb(0,0,0)";
    else 
      b.style.background = "transparent";
  }
}

reload();

</script>
